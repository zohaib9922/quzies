{"version":3,"file":"992.1c578d8657c7ee20aad0.js","mappings":"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","sources":["webpack://ctFrontend/./static/js/frontend/search-implementation.js","webpack://ctFrontend/./node_modules/arr-flatten/index.js","webpack://ctFrontend/./node_modules/classnames/index.js","webpack://ctFrontend/./node_modules/dom-chef/index.js"],"sourcesContent":["// @jsx h\nimport { h } from 'dom-chef'\nimport classnames from 'classnames'\n\nimport { loadStyle } from '../helpers'\n\nlet alreadyRunning = false\n\nconst store = {}\n\nconst cachedFetch = (url) =>\n\tstore[url]\n\t\t? new Promise((resolve) => {\n\t\t\t\tresolve(store[url])\n\t\t\t\tstore[url] = store[url].clone()\n\t\t  })\n\t\t: new Promise((resolve) =>\n\t\t\t\tfetch(url).then((response) => {\n\t\t\t\t\tresolve(response)\n\t\t\t\t\tstore[url] = response.clone()\n\t\t\t\t})\n\t\t  )\n\nconst getPreviewElFor = ({\n\thasThumbs,\n\tpost: {\n\t\ttitle: { rendered },\n\t\tlink: href,\n\t\t_embedded = {},\n\t\tproduct_price = 0,\n\t},\n}) => {\n\treturn (\n\t\t<a className=\"ct-search-item\" role=\"option\" key={href} {...{ href }}>\n\t\t\t{_embedded['wp:featuredmedia'] && hasThumbs && (\n\t\t\t\t<span\n\t\t\t\t\t{...{\n\t\t\t\t\t\tclass: classnames({\n\t\t\t\t\t\t\t['ct-image-container']: true,\n\t\t\t\t\t\t}),\n\t\t\t\t\t}}>\n\t\t\t\t\t<img\n\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\tsrc: (\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t_embedded['wp:featuredmedia'][0]\n\t\t\t\t\t\t\t\t\t\t.media_details || {\n\t\t\t\t\t\t\t\t\t\tsizes: {},\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t).sizes || {}\n\t\t\t\t\t\t\t).thumbnail\n\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t_embedded['wp:featuredmedia'][0]\n\t\t\t\t\t\t\t\t\t\t\t.media_details || {\n\t\t\t\t\t\t\t\t\t\t\tsizes: [],\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t  ).sizes.thumbnail.source_url\n\t\t\t\t\t\t\t\t: values(\n\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t_embedded['wp:featuredmedia'][0]\n\t\t\t\t\t\t\t\t\t\t\t\t.media_details || {\n\t\t\t\t\t\t\t\t\t\t\t\tsizes: [],\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t).sizes || {}\n\t\t\t\t\t\t\t\t  ).reduce(\n\t\t\t\t\t\t\t\t\t\t(currentSmallest, current) =>\n\t\t\t\t\t\t\t\t\t\t\tcurrent.width <\n\t\t\t\t\t\t\t\t\t\t\tcurrentSmallest.width\n\t\t\t\t\t\t\t\t\t\t\t\t? current\n\t\t\t\t\t\t\t\t\t\t\t\t: currentSmallest,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\twidth: 9999999999,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t  ).source_url ||\n\t\t\t\t\t\t\t\t  _embedded['wp:featuredmedia'][0].source_url,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t)}\n\t\t\t<span>\n\t\t\t\t{rendered}\n\t\t\t\t{product_price ? (\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"ct-search-item-price\"\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t__html: product_price,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tkey=\"price\"\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</span>\n\t\t</a>\n\t)\n}\n\nexport const mount = (formEl, args = {}) => {\n\tconst clickOutsideHandler = (e) => {\n\t\tlet mode = { mode: 'inline', ...args }.mode\n\n\t\tif (mode === 'modal') {\n\t\t\treturn\n\t\t}\n\n\t\tif (formEl.contains(e.target)) {\n\t\t\treturn\n\t\t}\n\n\t\tfadeOutAndRemove(formEl.querySelector('.ct-search-results'))\n\t}\n\n\tconst maybeEl = formEl.querySelector('input[type=\"search\"]')\n\tconst options = {\n\t\tpostType: 'ct_forced_any',\n\n\t\t// inline | modal\n\t\tmode: 'inline',\n\n\t\tperPage: 5,\n\n\t\t...args,\n\t}\n\n\tif (!maybeEl) {\n\t\treturn\n\t}\n\n\toptions.postType = formEl.querySelector('[name=\"post_type\"]')\n\t\t? `ct_forced_${formEl.querySelector('[name=\"post_type\"]').value}`\n\t\t: formEl.querySelector('[name=\"ct_post_type\"]')\n\t\t? `ct_forced_${formEl.querySelector('[name=\"ct_post_type\"]').value}`\n\t\t: 'ct_forced_any'\n\n\toptions.productPrice = formEl.querySelector('[name=\"ct_product_price\"]')\n\t\t? !!formEl.querySelector('[name=\"ct_product_price\"]').value\n\t\t: false\n\tconsole.log(options)\n\tif (!window.fetch) return\n\n\tlet listener = debounce((e) => {\n\t\tdocument.removeEventListener('click', clickOutsideHandler)\n\t\tdocument.addEventListener('click', clickOutsideHandler)\n\n\t\tif (e.target.value.trim().length === 0) {\n\t\t\tfadeOutAndRemove(formEl.querySelector('.ct-search-results'))\n\n\t\t\tlet maybeStatusEl = formEl.querySelector('[aria-live]')\n\n\t\t\tif (maybeStatusEl) {\n\t\t\t\tmaybeStatusEl.innerHTML = ct_localizations.search_live_no_result\n\t\t\t}\n\n\t\t\treturn\n\t\t}\n\n\t\tformEl.classList.add('ct-searching')\n\n\t\tcachedFetch(\n\t\t\t`${ct_localizations.rest_url}wp/v2/posts${\n\t\t\t\tct_localizations.rest_url.indexOf('?') > -1 ? '&' : '?'\n\t\t\t}_embed=1&post_type=${options.postType}&per_page=${\n\t\t\t\toptions.perPage\n\t\t\t}&product_price=${options.productPrice}&search=${e.target.value}`\n\t\t).then((response) => {\n\t\t\tlet totalAmountOfPosts = parseInt(\n\t\t\t\tresponse.headers.get('X-WP-Total'),\n\t\t\t\t10\n\t\t\t)\n\n\t\t\tloadStyle(ct_localizations.dynamic_styles.search_lazy).then(() => {\n\t\t\t\tresponse.json().then((posts) => {\n\t\t\t\t\tif (alreadyRunning) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tformEl.classList.remove('ct-searching')\n\n\t\t\t\t\tlet itHadSearchResultsBefore =\n\t\t\t\t\t\t!!formEl.querySelector('.ct-search-results')\n\n\t\t\t\t\talreadyRunning = true\n\n\t\t\t\t\tlet searchResults =\n\t\t\t\t\t\tformEl.querySelector('.ct-search-results')\n\n\t\t\t\t\tlet { height: heightBeforeRemoval } = searchResults\n\t\t\t\t\t\t? searchResults.getBoundingClientRect()\n\t\t\t\t\t\t: 0\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tsearchResults &&\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\te.target.value.trim().length === 0 ||\n\t\t\t\t\t\t\tposts.length === 0\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Should just quickly replace the list\n\t\t\t\t\t\t * when results are available\n\t\t\t\t\t\t */\n\t\t\t\t\t\tsearchResults && formEl.removeChild(searchResults)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\te.target.value.trim().length === 0 ||\n\t\t\t\t\t\t\tposts.length === 0\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tfadeOutAndRemove(searchResults)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet searchResultsCountElLabel =\n\t\t\t\t\t\tct_localizations.search_live_no_result\n\n\t\t\t\t\tif (posts.length > 0 && e.target.value.trim().length > 0) {\n\t\t\t\t\t\tsearchResultsCountElLabel = (\n\t\t\t\t\t\t\tposts.length > 1\n\t\t\t\t\t\t\t\t? ct_localizations.search_live_many_results\n\t\t\t\t\t\t\t\t: ct_localizations.search_live_one_result\n\t\t\t\t\t\t).replace('%s', posts.length)\n\t\t\t\t\t}\n\n\t\t\t\t\tlet maybeStatusEl = formEl.querySelector('[aria-live]')\n\n\t\t\t\t\tif (maybeStatusEl) {\n\t\t\t\t\t\tmaybeStatusEl.innerHTML = searchResultsCountElLabel\n\t\t\t\t\t}\n\n\t\t\t\t\tif (posts.length > 0 && e.target.value.trim().length > 0) {\n\t\t\t\t\t\tlet searchResultsEl = (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ct-search-results\"\n\t\t\t\t\t\t\t\trole=\"listbox\"\n\t\t\t\t\t\t\t\taria-label={\n\t\t\t\t\t\t\t\t\tct_localizations.search_live_results\n\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t{posts.map((post) =>\n\t\t\t\t\t\t\t\t\tgetPreviewElFor({\n\t\t\t\t\t\t\t\t\t\tpost,\n\t\t\t\t\t\t\t\t\t\thasThumbs:\n\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\tformEl.dataset.liveResults || ''\n\t\t\t\t\t\t\t\t\t\t\t).indexOf('thumbs') > -1,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{totalAmountOfPosts > options.perPage ? (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"ct-search-more\"\n\t\t\t\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\t\t\t\thref: ct_localizations.search_url.replace(\n\t\t\t\t\t\t\t\t\t\t\t\t/QUERY_STRING/,\n\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t{ct_localizations.show_more_text}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\tformEl.appendChild(searchResultsEl)\n\n\t\t\t\t\t\tif (!itHadSearchResultsBefore) {\n\t\t\t\t\t\t\tfadeIn(formEl.querySelector('.ct-search-results'))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet searchResults =\n\t\t\t\t\t\t\t\tformEl.querySelector('.ct-search-results')\n\n\t\t\t\t\t\t\tlet { height: heightAfterReplace } =\n\t\t\t\t\t\t\t\tsearchResults.getBoundingClientRect()\n\n\t\t\t\t\t\t\tif (heightBeforeRemoval !== heightAfterReplace) {\n\t\t\t\t\t\t\t\tsearchResults.style.height = `${heightBeforeRemoval}px`\n\t\t\t\t\t\t\t\tsearchResults.classList.add('ct-slide')\n\n\t\t\t\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\t\t\t\tsearchResults.style.height = `${heightAfterReplace}px`\n\n\t\t\t\t\t\t\t\t\twhenTransitionEnds(searchResults, () => {\n\t\t\t\t\t\t\t\t\t\tsearchResults.removeAttribute('style')\n\n\t\t\t\t\t\t\t\t\t\tsearchResults.classList.remove(\n\t\t\t\t\t\t\t\t\t\t\t'ct-slide'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (formEl.querySelector('.ct-search-more')) {\n\t\t\t\t\t\t\tformEl\n\t\t\t\t\t\t\t\t.querySelector('.ct-search-more')\n\t\t\t\t\t\t\t\t.addEventListener('click', (e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t\t\t\tformEl.submit()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twindow.scrollTo(0, 0)\n\t\t\t\t\t}\n\n\t\t\t\t\talreadyRunning = false\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\t}, 200)\n\n\tmaybeEl.addEventListener('input', listener)\n\t;({ mode: 'inline', ...args }.mode === 'modal' &&\n\t\tmaybeEl.addEventListener('blur', (e) => setTimeout(() => listener(e))))\n\n\tmaybeEl.addEventListener('focus', (e) => {\n\t\tlistener(e)\n\t})\n\n\tif (maybeEl.value.length > 0) {\n\t\tlistener({ target: maybeEl })\n\t}\n}\n\nfunction fadeOutAndRemove(el) {\n\tif (!el) return\n\n\tlet { height } = el.getBoundingClientRect()\n\n\tel.classList.add('ct-fade-leave')\n\tel.style.height = `${height}px`\n\n\tel.closest('form').classList.remove('ct-has-dropdown')\n\n\trequestAnimationFrame(() => {\n\t\tel.classList.remove('ct-fade-leave')\n\t\tel.classList.add('ct-fade-leave-active')\n\t\tel.style.height = 0\n\n\t\twhenTransitionEnds(\n\t\t\tel,\n\t\t\t() => el.parentNode && el.parentNode.removeChild(el)\n\t\t)\n\t})\n}\n\nfunction whenTransitionEnds(el, cb) {\n\tconst end = () => {\n\t\tel.removeEventListener('transitionend', onEnd)\n\t\tcb()\n\t}\n\n\tconst onEnd = (e) => {\n\t\tif (e.target === el) {\n\t\t\tend()\n\t\t}\n\t}\n\n\tel.addEventListener('transitionend', onEnd)\n}\n\nfunction fadeIn(el) {\n\tel.classList.add('ct-fade-enter')\n\n\tlet { height } = el.getBoundingClientRect()\n\n\tel.classList.add('ct-fade-leave')\n\tel.style.height = 0\n\n\tel.closest('form').classList.add('ct-has-dropdown')\n\n\trequestAnimationFrame(() => {\n\t\tel.style.height = `${height}px`\n\t\tel.classList.remove('ct-fade-enter')\n\t\tel.classList.add('ct-fade-enter-active')\n\n\t\twhenTransitionEnds(el, () => el.removeAttribute('style'))\n\t})\n}\n\nfunction debounce(fn, wait) {\n\tvar timeout\n\treturn function () {\n\t\tif (!wait) {\n\t\t\treturn fn.apply(this, arguments)\n\t\t}\n\t\tvar context = this\n\t\tvar args = arguments\n\t\tclearTimeout(timeout)\n\t\ttimeout = setTimeout(function () {\n\t\t\ttimeout = null\n\t\t\treturn fn.apply(context, args)\n\t\t}, wait)\n\t}\n}\n\nfunction values(obj) {\n\tvar result = []\n\n\tif (typeof obj == 'object' || typeof obj == 'function') {\n\t\tvar keys = Object.keys(obj)\n\t\tvar len = keys.length\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tresult.push(obj[keys[i]])\n\t\t}\n\n\t\treturn result\n\t}\n}\n","/*!\n * arr-flatten <https://github.com/jonschlinkert/arr-flatten>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function (arr) {\n  return flat(arr, []);\n};\n\nfunction flat(arr, res) {\n  var i = 0, cur;\n  var len = arr.length;\n  for (; i < len; i++) {\n    cur = arr[i];\n    Array.isArray(cur) ? flat(cur, res) : res.push(cur);\n  }\n  return res;\n}\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","'use strict';\n\nconst svgTagNames = require('svg-tag-names');\nconst flatten = require('arr-flatten');\n\n// Copied from Preact\nconst IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\nconst excludeSvgTags = [\n\t'a',\n\t'audio',\n\t'canvas',\n\t'iframe',\n\t'script',\n\t'video'\n];\n\nconst svgTags = svgTagNames.filter(name => !excludeSvgTags.includes(name));\n\nconst isSVG = tagName => svgTags.includes(tagName);\n\nconst setCSSProps = (el, style) => {\n\tObject\n\t\t.keys(style)\n\t\t.forEach(name => {\n\t\t\tlet value = style[name];\n\n\t\t\tif (typeof value === 'number' && !IS_NON_DIMENSIONAL.test(name)) {\n\t\t\t\tvalue += 'px';\n\t\t\t}\n\n\t\t\tel.style[name] = value;\n\t\t});\n};\n\nconst createElement = tagName => {\n\tif (isSVG(tagName)) {\n\t\treturn document.createElementNS('http://www.w3.org/2000/svg', tagName);\n\t}\n\n\tif (tagName === DocumentFragment) {\n\t\treturn document.createDocumentFragment();\n\t}\n\n\treturn document.createElement(tagName);\n};\n\nconst setAttribute = (el, name, value) => {\n\tif (value === undefined || value === null) {\n\t\treturn;\n\t}\n\n\t// Naive support for xlink namespace\n\t// Full list: https://github.com/facebook/react/blob/1843f87/src/renderers/dom/shared/SVGDOMPropertyConfig.js#L258-L264\n\tif (/^xlink[AHRST]/.test(name)) {\n\t\tel.setAttributeNS('http://www.w3.org/1999/xlink', name.replace('xlink', 'xlink:').toLowerCase(), value);\n\t} else {\n\t\tel.setAttribute(name, value);\n\t}\n};\n\nconst build = (tagName, attrs, children) => {\n\tconst el = createElement(tagName);\n\n\tObject.keys(attrs).forEach(name => {\n\t\tconst value = attrs[name];\n\t\tif (name === 'class' || name === 'className') {\n\t\t\tsetAttribute(el, 'class', value);\n\t\t} else if (name === 'style') {\n\t\t\tsetCSSProps(el, value);\n\t\t} else if (name.indexOf('on') === 0) {\n\t\t\tconst eventName = name.slice(2).toLowerCase();\n\t\t\tel.addEventListener(eventName, value);\n\t\t} else if (name === 'dangerouslySetInnerHTML') {\n\t\t\tel.innerHTML = value.__html;\n\t\t} else if (name !== 'key' && value !== false) {\n\t\t\tsetAttribute(el, name, value === true ? '' : value);\n\t\t}\n\t});\n\n\tif (!attrs.dangerouslySetInnerHTML) {\n\t\tel.appendChild(children);\n\t}\n\n\treturn el;\n};\n\nfunction h(tagName, attrs) {\n\t// eslint-disable-next-line prefer-rest-params\n\tconst childrenArgs = [].slice.apply(arguments, [2]);\n\tconst children = document.createDocumentFragment();\n\n\tflatten(childrenArgs).forEach(child => {\n\t\tif (child instanceof Node) {\n\t\t\tchildren.appendChild(child);\n\t\t} else if (typeof child !== 'boolean' && typeof child !== 'undefined' && child !== null) {\n\t\t\tchildren.appendChild(document.createTextNode(child));\n\t\t}\n\t});\n\n\treturn build(tagName, attrs || {}, children);\n}\n\n// Improve TypeScript support for DocumentFragment\n// https://github.com/Microsoft/TypeScript/issues/20469\nconst React = {\n\tcreateElement: h,\n\tFragment: typeof DocumentFragment === 'function' ? DocumentFragment : () => {}\n};\n\n// Enable support for\n// const React = require('dom-chef')\nmodule.exports = React;\n\n// Enable support for\n// const {h} = require('dom-chef')\n// import {h} from 'dom-chef'\nmodule.exports.h = h;\n\n// Enable support for\n// import React from 'dom-chef'\nmodule.exports.default = React;\n"],"names":["alreadyRunning","store","cachedFetch","url","Promise","resolve","clone","fetch","then","response","getPreviewElFor","hasThumbs","post","title","rendered","link","href","_embedded","product_price","className","role","key","class","classnames","src","media_details","sizes","thumbnail","source_url","values","reduce","currentSmallest","current","width","dangerouslySetInnerHTML","__html","mount","formEl","args","clickOutsideHandler","e","mode","contains","target","fadeOutAndRemove","querySelector","maybeEl","options","postType","perPage","value","productPrice","console","log","window","listener","debounce","document","removeEventListener","addEventListener","trim","length","classList","add","ct_localizations","rest_url","indexOf","totalAmountOfPosts","parseInt","headers","get","loadStyle","dynamic_styles","search_lazy","json","posts","remove","itHadSearchResultsBefore","searchResults","height","heightBeforeRemoval","getBoundingClientRect","removeChild","searchResultsCountElLabel","search_live_no_result","search_live_many_results","search_live_one_result","replace","maybeStatusEl","innerHTML","searchResultsEl","search_live_results","map","dataset","liveResults","search_url","show_more_text","appendChild","heightAfterReplace","style","requestAnimationFrame","whenTransitionEnds","removeAttribute","fadeIn","preventDefault","submit","scrollTo","setTimeout","el","closest","parentNode","cb","onEnd","fn","wait","timeout","apply","this","arguments","context","clearTimeout","obj","result","keys","Object","len","i","push","flat","arr","res","cur","Array","isArray","module","exports","hasOwn","hasOwnProperty","classNames","classes","arg","argType","inner","toString","prototype","call","join","default","svgTagNames","flatten","IS_NON_DIMENSIONAL","excludeSvgTags","svgTags","filter","name","includes","setAttribute","test","setAttributeNS","toLowerCase","build","tagName","attrs","children","isSVG","createElementNS","DocumentFragment","createDocumentFragment","createElement","forEach","setCSSProps","eventName","slice","h","childrenArgs","child","Node","createTextNode","React","Fragment"],"sourceRoot":""}